var Oo=Object.create;var Pe=Object.defineProperty,Ro=Object.defineProperties,Bo=Object.getOwnPropertyDescriptor,Po=Object.getOwnPropertyDescriptors,Fo=Object.getOwnPropertyNames,Ni=Object.getOwnPropertySymbols,_o=Object.getPrototypeOf,Xi=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable;var Ui=(s,e,i)=>e in s?Pe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i,m=(s,e)=>{for(var i in e||(e={}))Xi.call(e,i)&&Ui(s,i,e[i]);if(Ni)for(var i of Ni(e))Do.call(e,i)&&Ui(s,i,e[i]);return s},z=(s,e)=>Ro(s,Po(e)),Yi=s=>Pe(s,"__esModule",{value:!0});var jo=(s,e)=>{for(var i in e)Pe(s,i,{get:e[i],enumerable:!0})},$i=(s,e,i,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Fo(e))!Xi.call(s,n)&&(i||n!=="default")&&Pe(s,n,{get:()=>e[n],enumerable:!(o=Bo(e,n))||o.enumerable});return s},zi=(s,e)=>$i(Yi(Pe(s!=null?Oo(_o(s)):{},"default",!e&&s&&s.__esModule?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s),No=(s=>(e,i)=>s&&s.get(e)||(i=$i(Yi({}),e,1),s&&s.set(e,i),i))(typeof WeakMap!="undefined"?new WeakMap:0);var yi=(s,e,i)=>{if(!e.has(s))throw TypeError("Cannot "+i)};var t=(s,e,i)=>(yi(s,e,"read from private field"),i?i.call(s):e.get(s)),a=(s,e,i)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,i)},d=(s,e,i,o)=>(yi(s,e,"write to private field"),o?o.call(s,i):e.set(s,i),i);var R=(s,e,i)=>(yi(s,e,"access private method"),i);var L=(s,e,i)=>new Promise((o,n)=>{var r=p=>{try{c(i.next(p))}catch(u){n(u)}},l=p=>{try{c(i.throw(p))}catch(u){n(u)}},c=p=>p.done?o(p.value):Promise.resolve(p.value).then(r,l);c((i=i.apply(s,e)).next())});var Ls={};jo(Ls,{MapboxAddressAutofill:()=>Ae,MapboxAddressConfirmation:()=>re,MapboxAddressMinimap:()=>Ie,MapboxHTMLEvent:()=>h,MapboxSearchBox:()=>Se,autofill:()=>Io,config:()=>M,confirmAddress:()=>ni,getAutofillSearchText:()=>Te,getFormAutofillValues:()=>ii});var qi=document.implementation.createHTMLDocument();function _(s,e){let i={};for(let[o,n]of Object.entries(e))i[o]=s.querySelector(n);return i}function Vi(s){return Array.from(s.childNodes||[]).filter(e=>e.nodeType===Node.ELEMENT_NODE)}function x(s){let e=document.createElement("template");return e.innerHTML=s,e.content.firstElementChild}function Wi(s){let e=qi.createElement("style");return e.textContent=s,qi.head.appendChild(e),e.sheet}function Gi(s){return window.getComputedStyle(s).display!=="none"}function D(s,e){if(!s)return;Object.getOwnPropertyDescriptor(s.constructor.prototype,"value").set.call(s,e);let o=s;o._valueTracker&&o._valueTracker.setValue("");let n=new Event("input",{bubbles:!0});n.simulated=!0,s.dispatchEvent(n);let r=new Event("change",{bubbles:!0});r.simulated=!0,s.dispatchEvent(r)}function Gt(s,e=!1){let i,o,n=s.getBoundingClientRect();if(s.style.display==="none"||n.height===0&&n.width===0){let r=s.cloneNode(e);s.parentElement.appendChild(r),r.style.setProperty("display","block","important");let l=r.getBoundingClientRect();i=l.width,o=l.height,r.style.setProperty("display","none"),r.remove()}else i=n.width,o=n.height;return{height:Math.floor(o),width:Math.floor(i)}}function Ki(s){let e=document.createElement("style");e.innerHTML=s,document.head.appendChild(e)}var Uo=new RegExp("[_a-zA-Z]+[_a-zA-Z0-9-]*","g"),Xo=new RegExp(`\\.${Uo.source}`,"g"),Yo=new RegExp("^\\s*(@(?:media|supports)[^{]*){(.*)}\\s*$");function Fe(s,e){return s.replace(Xo,i=>"."+e(i.slice(1)))}function Ai(s,e){let o=Wi(s).cssRules;function n(l){if(l instanceof CSSStyleRule)return`${Fe(l.selectorText,e)} { ${l.style.cssText} }`;let c=Yo.exec(l.cssText.split(`
`).join(""));if(c&&c.length>2){let p=c[1],u=c[2];return`${p} { ${Ai(u,e)} }`}return l.cssText}let r="";for(let l of Array.from(o))r+=n(l)+`

`;return r.trim()}function Si(s,e){let i=Array.from(s.querySelectorAll("[class]"));i.push(s);for(let o of i){let{classList:n}=o;for(let r of Array.from(n))n.remove(r),n.add(e(r))}return s}var io=require("@mapbox/search-js-core");var Li=1.4;function Zi(s,e,i=.5){let{center:o,zoom:n}=s.cameraForBounds(e),r=Math.max(n-i,0);return{center:o,zoom:r,speed:Li}}function Qi(s){switch(s){case"street":return 15;case"locality":case"oaza":return 14;case"place":case"city":return 13;case"district":return 9;case"region":case"prefecture":return 6;case"country":return 4;default:return 16}}function Kt(s,e){return`https://api.mapbox.com/styles/v1/${s}/${e}/static/`}var Ji=Kt("mapbox","satellite-streets-v11"),eo="20d01",to=["mapbox.com","mapbox.cn","tilestream.net"];function k(){return"mbx"+new io.SessionToken().id.slice(0,8)}function ge(s){try{return JSON.parse(s)}catch(e){return null}}function J(s,e){if(s==null||e==null||typeof s!="object"||typeof e!="object")return s===e;let i=Object.keys(s),o=Object.keys(e);if(i.length!==o.length)return!1;for(let n of i)if(!J(s[n],e[n]))return!1;return!0}function Ci(s,e){let i=Math.pow(10,e);return Math.round(s*i)/i}function oo(s){return Boolean(s.match(/localhost|[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}|::1|\.local|^$/gi))}function so(s){return Boolean(to.some(e=>s.includes(e)))}var ve,ee,te,C=class extends HTMLElement{constructor(){super(...arguments);a(this,ve,k());a(this,ee,void 0);a(this,te,e=>`${t(this,ve)}--${e}`)}get template(){return null}get templateStyle(){return null}get templateUserStyle(){return null}clonedCallback(e,i){let o=r=>r.replace(e,i);Si(this,o);let n=Array.from(this.querySelectorAll("style"));for(let r of n)r.textContent=Fe(r.textContent,o);n.length&&d(this,ee,n[n.length-1])}connectedCallback(){if(this.childElementCount>0){let n=this.dataset.seed,r=t(this,ve);n&&n!==r&&(this.clonedCallback(n,r),this.dataset.seed=r);return}this.dataset.seed=t(this,ve);let e=this.template;if(e){let n=this.prepareTemplate(e);this.appendChild(n)}let i=this.templateStyle;if(i){let n=document.createElement("style");n.textContent=this.prepareCSS(i),this.appendChild(n)}let o=document.createElement("style");this.templateUserStyle&&(o.textContent=this.prepareCSS(this.templateUserStyle)),this.appendChild(o),d(this,ee,o)}prepareTemplate(e){let i=e.content.firstElementChild;return Si(i.cloneNode(!0),t(this,te))}prepareCSS(e){return Ai(e,t(this,te))}updateTemplateUserStyle(e){!t(this,ee)||(t(this,ee).textContent=this.prepareCSS(e))}querySelector(e){return super.querySelector(Fe(e,t(this,te)))}querySelectorAll(e){return super.querySelectorAll(Fe(e,t(this,te)))}addEventListener(e,i,o){super.addEventListener(e,i,o)}removeEventListener(e,i,o){super.removeEventListener(e,i,o)}dispatchEvent(e){return super.dispatchEvent(e)}};ve=new WeakMap,ee=new WeakMap,te=new WeakMap;var h=class extends CustomEvent{constructor(e,i){super(e,{composed:!0,detail:i})}clone(e){let i=new h(this.type,this.detail);return e&&Object.defineProperty(i,"target",{value:e}),i}};var no='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.8 3.8a1 1 0 0 1 1.4 0L9 7.58l3.8-3.8a1 1 0 1 1 1.4 1.42L10.42 9l3.8 3.8a1 1 0 0 1-1.42 1.4L9 10.42l-3.8 3.8a1 1 0 0 1-1.4-1.42L7.58 9l-3.8-3.8a1 1 0 0 1 0-1.4Z" fill="currentColor"/></svg>';var ro='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 16A7 7 0 1 0 9 2a7 7 0 0 0 0 14ZM6.88 4.88a2.58 2.58 0 0 1 1.83-.75h1.08a2.58 2.58 0 0 1 2.59 2.58v.16c0 1-.53 1.94-1.4 2.46l-.56.34c-.27.16-.45.42-.52.71-.03.14-.14.25-.28.25H8.38a.23.23 0 0 1-.24-.25c.08-.91.59-1.74 1.38-2.21l.56-.34c.34-.2.54-.57.54-.96V6.7a.83.83 0 0 0-.83-.83H8.71a.83.83 0 0 0-.84.83v.18a.87.87 0 1 1-1.75 0V6.7c0-.69.28-1.34.76-1.83ZM10 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" fill="currentColor"/></svg>';var ao='<svg width="48" height="56" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#a)"><path d="m24 50.4 13.79-14.12a18.82 18.82 0 0 0 4.23-20.86 19.23 19.23 0 0 0-7.19-8.6 19.76 19.76 0 0 0-21.66 0c-3.21 2.11-5.71 5.1-7.19 8.6a18.82 18.82 0 0 0 4.23 20.86L24 50.4Z" fill="currentColor"/><path d="M37.26 35.75 24 49.34 10.75 35.76l-.01-.01A18.07 18.07 0 0 1 6.68 15.7a18.48 18.48 0 0 1 6.9-8.26 19 19 0 0 1 20.84 0 18.48 18.48 0 0 1 6.9 8.26 18.07 18.07 0 0 1-4.06 20.04Z" stroke="#fff" stroke-width="1.5"/></g><circle cx="24" cy="22.45" fill="#fff" r="5.85"/><defs><filter id="a" x=".5" y=".6" width="47" height="54.8" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="2"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_17_871"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_17_871" result="shape"/></filter></defs></svg>';var _e="1.0.0-beta.13";var Wo=`https://api.mapbox.com/search-js/v${_e}/img/style-toggle-satellite.jpg`,Go=`https://api.mapbox.com/search-js/v${_e}/img/style-toggle-default.jpg`,Ko=768-1,Zo=`@media only screen and (max-width: ${Ko}px)`,ki={variables:{unit:["mobile","16px","14px"],unitHeader:["mobile","24px","18px"],minWidth:"min(300px, 100vw)",spacing:"0.75em",padding:"0.5em 0.75em",paddingModal:"1.25em",colorText:"rgba(0, 0, 0, 0.75)",colorPrimary:"#4264FB",colorSecondary:"#667F91",colorBackground:"#fff",colorBackgroundHover:"#f5f5f5",colorBackgroundActive:"#f0f0f0",colorBackdrop:"rgba(102, 127, 145, 0.3)",border:"none",borderRadius:"4px",boxShadow:`
      0 0 10px 2px rgba(0, 0, 0, 0.05),
      0 0 6px 1px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.1)
    `,lineHeight:"1.2em",fontFamily:`
      -apple-system, BlinkMacSystemFont,
      avenir next, avenir,
      segoe ui,
      helvetica neue, helvetica,
      Ubuntu, roboto, noto, arial, sans-serif
    `,fontWeight:"normal",fontWeightSemibold:"600",fontWeightBold:"bold",duration:"150ms",curve:"ease-out"},icons:{close:no,question:ro,marker:ao},images:{styleToggleDefault:Go,styleToggleSatellite:Wo}};function y(s,e={}){let i=m(m({},ki.variables),e.variables||{}),o=e.cssText||"",n="";for(let[r,l]of Object.entries(i)){if(!Array.isArray(l)){n+=`--${r}: ${l};`;continue}if(l[0]!=="mobile"){let u=JSON.stringify(l);throw new Error(`Unsupported expression in theme variables: ${r} ${u}`)}let[,c,p]=l;o+=`${Zo} { ${s} { --${r}: ${c} !important; } }`,n+=`--${r}: ${p};`}return o+`${s} { ${n} }`}function H(s,e={}){return m(m({},ki.icons),e.icons||{})[s]}function lo(s,e={}){return m(m({},ki.images),e.images||{})[s]}var q=require("@floating-ui/dom"),ie,Zt,Qt=class{constructor(e,i,o){a(this,ie,void 0);a(this,Zt,{placement:"bottom-start",flip:!1,offset:10});this.update=()=>L(this,null,function*(){let e={placement:this.options.placement,middleware:[(0,q.offset)(this.options.offset),this.options.flip&&(0,q.flip)()].filter(Boolean)},{x:i,y:o}=yield(0,q.computePosition)(this.referenceEl,this.floatingEl,e);Object.assign(this.floatingEl.style,{left:`${i}px`,top:`${o}px`})});this.referenceEl=e,this.floatingEl=i,d(this,ie,m(m({},t(this,Zt)),o)),this.destroy=(0,q.autoUpdate)(this.referenceEl,this.floatingEl,this.update)}get options(){return t(this,ie)}set options(e){d(this,ie,m(m({},t(this,ie)),e))}};ie=new WeakMap,Zt=new WeakMap;var O="*{box-sizing:border-box!important}[role=button]{cursor:pointer}.MapboxSearch{--width:0;display:none}.Results{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);min-width:var(--minWidth);overflow-y:auto;position:absolute;transform:translateZ(0);transition:visibility var(--duration);width:var(--width);z-index:1000}.Results:not([aria-hidden=true]){visibility:visible}.Results[aria-hidden=true]{animation:fadein var(--duration) var(--curve) reverse forwards;visibility:hidden}.Suggestion{padding:var(--padding)}.Suggestion:hover{cursor:pointer}.Suggestion[aria-selected=true]{background-color:var(--colorBackgroundHover)}.Suggestion:active{background-color:var(--colorBackgroundActive)}.SuggestionName{font-weight:var(--fontWeightBold)}.ResultsAttribution{padding:var(--padding)}.ResultsAttribution a{color:var(--colorSecondary)}.ResultsAttribution a:not(:hover){text-decoration:none}.ResultsList{list-style:none;margin:0;padding:0}.Label{display:none}.Input{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--padding);width:100%}mapbox-address-confirmation-feature[aria-hidden=true],mapbox-address-confirmation-no-feature[aria-hidden=true]{display:none}.MapboxAddressConfirmation{align-items:center;background-color:var(--colorBackdrop);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;transform:translateZ(0);z-index:1000}.MapboxAddressConfirmation:not([aria-hidden=true]){animation:fadein var(--duration) var(--curve) forwards;visibility:visible}.MapboxAddressConfirmation[aria-hidden=true]{visibility:hidden}.ContentFeature,.ContentNoFeature{width:var(--minWidth)}.Modal{background-color:var(--colorBackground);border:var(--border);border-radius:var(--borderRadius);box-shadow:var(--boxShadow);color:var(--colorText);font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight);padding:var(--paddingModal);width:100%}@media screen and (max-width:480px){.MapboxAddressConfirmation{align-items:flex-end}.ContentFeature,.ContentNoFeature{width:100%}.Modal{border-bottom-left-radius:0;border-bottom-right-radius:0}}.ModalHeader{align-items:center;color:var(--colorPrimary);display:flex;font-size:var(--unitHeader);font-weight:var(--fontWeightBold);margin-bottom:var(--spacing);user-select:none;width:100%}.ModalMap{height:calc(var(--minWidth)*9/16);margin-left:calc(var(--paddingModal)*-1);width:calc(100% + var(--paddingModal)*2)}.ModalMap[aria-hidden=true]{display:none}.Icon{height:var(--unitHeader);width:var(--unitHeader)}.Icon.IconClose{color:var(--colorSecondary)}.ModalHeaderTitle{flex:1;margin-left:.25em}.ModalFooter{color:var(--colorSecondary);margin-top:var(--spacing);text-align:center}.ModalFooter[aria-hidden=true]{display:none}.ModalSubheader{font-weight:var(--fontWeightBold);user-select:none}.ModalDescription{color:var(--colorPrimary)}.ModalAddress,.ModalSubheader{margin-bottom:var(--spacing)}.ModalAddress.ModalAddressApprove{color:var(--colorPrimary)}.Button{border-radius:var(--borderRadius);cursor:pointer;font-weight:var(--fontWeightSemibold);margin-top:var(--spacing);padding:var(--padding);text-align:center;user-select:none;width:100%}.Button[aria-hidden=true]{display:none}.Button.ButtonPrimary{background-color:var(--colorPrimary);color:var(--colorBackground)}.Button.ButtonSecondary{border:1px solid var(--colorSecondary);color:var(--colorSecondary)}@keyframes fadein{0%{opacity:0}to{opacity:1}}.MapboxAddressMinimap{font-family:var(--fontFamily);font-size:var(--unit);font-weight:var(--fontWeight);line-height:var(--lineHeight)}.MapboxAddressMinimap[aria-hidden=true]{display:none}.MinimapImageContainer{border-radius:var(--borderRadius);overflow:hidden}.MinimapImage{height:unset;max-height:unset;max-width:unset;position:relative;width:unset}.MinimapInnerFrame{border:var(--border);border-radius:inherit;height:inherit;left:0;overflow:hidden;position:absolute;top:0;width:inherit}.MinimapMarker{left:50%;position:absolute;top:50%}.MinimapMarker>svg{color:var(--colorPrimary);display:block!important}.MinimapAttributionLogo{bottom:0;left:0;margin:0 0 6px 6px;position:absolute}.MinimapAttributionLogo a{cursor:pointer;display:block;height:23px;width:88px}.MinimapAttributionText{background-color:hsla(0,0%,100%,.65);bottom:0;font:11px/16px Helvetica Neue,Arial,Helvetica,sans-serif;padding:0 5px;position:absolute;right:0}.MinimapAttributionText a{color:rgba(0,0,0,.75);text-decoration:none}.MinimapAttributionText a:hover{color:inherit;text-decoration:underline}.MinimapAttributionText a:not(:first-child){margin-left:3px}.MinimapStyleToggle{background-position:0;background-repeat:no-repeat;background-size:contain;border:2px solid #fff;border-radius:3px;box-shadow:var(--boxShadow);cursor:pointer;height:2em;position:absolute;right:var(--spacing);top:var(--spacing);width:2em}.MinimapFooter{color:var(--colorSecondary);font-family:var(--fontFamily);font-size:var(--unit);margin-top:var(--spacing)}.MinimapFooter[aria-hidden=true]{display:none}.MinimapEditButtons{bottom:26px;display:flex;font-family:var(--fontFamily);position:absolute;right:var(--spacing)}.MinimapEditButtons .Button{box-shadow:var(--boxShadow)}.MinimapButtonCancel{background-color:var(--colorBackground);margin-left:var(--spacing)}.draggable{cursor:move;cursor:grab}.draggable:active{cursor:grabbing}";var Jo=x(`
<template>
  <div class="MapboxSearch">
      <div class="Label" role="label" aria-live="polite" aria-atomic="true">
      </div>
      <div class="Results" aria-hidden="true">
        <div class="ResultsList" role="listbox">
        </div>
        <div class="ResultsAttribution" aria-hidden="true">
          <a href="https://www.mapbox.com/search-service" target="_blank" tabindex="-1">
            Powered by Mapbox
          </a>
        </div>
      </div>
  </div>
</template>
`),es=x(`
<template>
  <div class="Suggestion" role="option">
    <div class="SuggestionName"></div>
    <div class="SuggestionDesc"></div>
  </div>
</template>
`);function wi(s,e){return`${s}-${e}`}var be,A,S,De,V,Me,Ee,je,co,j,oe,Jt,ts,Ne,Ue,Xe,Ye,$e,ze,xe,se,qe,$=class extends C{constructor(){super(...arguments);a(this,je);a(this,j);a(this,Jt);a(this,be,void 0);a(this,A,null);a(this,S,void 0);a(this,De,k());a(this,V,k());a(this,Me,void 0);a(this,Ee,0);a(this,Ne,{});a(this,Ue,{});a(this,Xe,{});this.retrieveFeature=null;a(this,Ye,e=>{let{Results:i}=t(this,S),o=e.target;if(o.dataset.mapboxSuccess){delete o.dataset.mapboxSuccess;return}let n=o.value;i.setAttribute("aria-busy","true"),this.session.suggest(n,this.options)});a(this,$e,e=>{if(!e||!e.suggestions){R(this,j,oe).call(this);return}R(this,Jt,ts).call(this),e.suggestions.length&&R(this,je,co).call(this),this.dispatchEvent(new h("suggest",e));let{Results:i}=t(this,S);i.setAttribute("aria-busy","false")});a(this,ze,e=>{this.dispatchEvent(new h("suggesterror",e));let{Results:i}=t(this,S);i.setAttribute("aria-busy","false"),R(this,j,oe).call(this)});a(this,xe,()=>{let e=this.input;delete e.dataset.mapboxSuccess,R(this,je,co).call(this)});a(this,se,()=>{document.activeElement!==this.input&&(this.session.abort(),R(this,j,oe).call(this))});a(this,qe,e=>{if(e.key==="Escape"){R(this,j,oe).call(this);return}if(e.key==="ArrowUp"){e.preventDefault(),this.selectedIndex=Math.max(0,this.selectedIndex-1);return}if(e.key==="ArrowDown"){e.preventDefault(),this.selectedIndex=Math.min(this.selectedIndex+1,this.suggestions.length-1);return}if(e.key==="Enter"){e.preventDefault(),this.retrieve(this.suggestions[this.selectedIndex]);return}})}get template(){return Jo}get templateStyle(){return O}get templateUserStyle(){return y(".MapboxSearch",this.theme)}get session(){return t(this,be)}set session(e){t(this,be)&&(e.removeEventListener("suggest",t(this,$e)),e.removeEventListener("suggesterror",t(this,ze))),e&&(e.addEventListener("suggest",t(this,$e)),e.addEventListener("suggesterror",t(this,ze))),d(this,be,e)}get suggestions(){var e;return(e=this.session.suggestions)==null?void 0:e.suggestions}get input(){return t(this,Me)}set input(e){let i=t(this,Me);i&&(i.removeEventListener("input",t(this,Ye)),i.removeEventListener("focus",t(this,xe)),i.removeEventListener("blur",t(this,se)),i.removeEventListener("keydown",t(this,qe)),t(this,A)&&t(this,A).destroy()),e&&(e.addEventListener("input",t(this,Ye)),e.addEventListener("focus",t(this,xe)),e.addEventListener("blur",t(this,se)),e.addEventListener("keydown",t(this,qe)),e.setAttribute("role","combobox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",t(this,V)),this.isConnected&&d(this,A,new Qt(e,t(this,S).Results,this.popoverOptions))),d(this,Me,e)}get selectedIndex(){return t(this,Ee)}set selectedIndex(e){let i=t(this,Ee);d(this,Ee,e);let{ResultsList:o,Label:n}=t(this,S),r=wi(t(this,V),e);if(this.input.setAttribute("aria-activedescendant",r),o.setAttribute("aria-activedescendant",r),i!==e){let l=wi(t(this,V),i),c=o.querySelector(`#${l}`);c==null||c.removeAttribute("aria-selected");let p=o.querySelector(`#${r}`);p==null||p.setAttribute("aria-selected","true")}n.textContent=this.suggestions[e].address+`: Suggestion ${e+1} of ${this.suggestions.length}`}renderItem(e){let i=this.prepareTemplate(es);return i.id=wi(t(this,V),e),i}fillItem(e,i,o){let[n,r]=Array.from(e.querySelectorAll('[role="option"] > *'));n.textContent="address_line1"in i?i.address_line1||i.matching_name||i.feature_name:i.matching_name||i.feature_name,r.textContent=i.description,o===this.selectedIndex?e.setAttribute("aria-selected","true"):e.removeAttribute("aria-selected")}get options(){return t(this,Ne)}set options(e){d(this,Ne,e)}get theme(){return t(this,Ue)}set theme(e){d(this,Ue,e),!(!t(this,S)||!e)&&this.updateTemplateUserStyle(y(".MapboxSearch",e))}get popoverOptions(){return t(this,Xe)}set popoverOptions(e){d(this,Xe,e),t(this,A)&&(t(this,A).options=e,t(this,A).update())}connectedCallback(){super.connectedCallback(),d(this,S,_(this,{MapboxSearch:".MapboxSearch",Results:".Results",ResultsList:".ResultsList",Label:".Label"}));let{Results:e,ResultsList:i,Label:o}=t(this,S);o.id=t(this,De),i.id=t(this,V),i.setAttribute("aria-labelledby",t(this,De)),e.addEventListener("blur",t(this,se)),!t(this,A)&&this.input&&d(this,A,new Qt(this.input,t(this,S).Results,this.popoverOptions)),requestAnimationFrame(()=>{t(this,A)&&t(this,A).update()})}disconnectedCallback(){this.input=null;let{Results:e}=t(this,S);e.removeEventListener("blur",t(this,se)),t(this,A)&&t(this,A).destroy()}retrieve(e){return L(this,null,function*(){var n;let i=this.input;i&&(i.dataset.mapboxSuccess="true");let o=yield this.session.retrieve(e,this.options);this.retrieveFeature=(n=o.features)==null?void 0:n[0],R(this,j,oe).call(this),this.dispatchEvent(new h("retrieve",o))})}simulateRetrieve(e){let i=this.input;i&&(i.dataset.mapboxSuccess="true"),this.retrieveFeature=e;let o={type:"FeatureCollection",features:[e]};R(this,j,oe).call(this),this.dispatchEvent(new h("retrieve",o))}focus(){document.activeElement===this.input?t(this,xe).call(this):this.input.focus()}blur(){this.input.blur()}updatePopover(){t(this,A)&&t(this,A).update()}};be=new WeakMap,A=new WeakMap,S=new WeakMap,De=new WeakMap,V=new WeakMap,Me=new WeakMap,Ee=new WeakMap,je=new WeakSet,co=function(){if(!this.suggestions||!this.suggestions.length)return;let{Results:e,MapboxSearch:i}=t(this,S),o=this.input.getBoundingClientRect();i.style.setProperty("--width",`${o.width}px`),i.style.setProperty("display","block"),this.input.setAttribute("aria-expanded","true"),e.removeAttribute("aria-hidden"),this.selectedIndex=0},j=new WeakSet,oe=function(){let{Results:e,ResultsList:i}=t(this,S);e.setAttribute("aria-hidden","true"),this.input.removeAttribute("aria-expanded"),i.removeAttribute("aria-activedescendant"),this.input.removeAttribute("aria-activedescendant")},Jt=new WeakSet,ts=function(){let{ResultsList:e}=t(this,S),i=this.suggestions;if(!i||!i.length){e.innerHTML="",R(this,j,oe).call(this);return}let o=Vi(e);if(i.length>o.length)for(let n=o.length;n<i.length;n++){let r=this.renderItem(n);o.push(r),r.onmouseenter=()=>{this.selectedIndex=n},e.appendChild(r)}if(i.length<o.length)for(let n=i.length;n<o.length;n++)o[n].remove();for(let n of i){let r=i.indexOf(n),l=o[r];this.fillItem(l,n,r),l.onclick=()=>{this.retrieve(n)}}},Ne=new WeakMap,Ue=new WeakMap,Xe=new WeakMap,Ye=new WeakMap,$e=new WeakMap,ze=new WeakMap,xe=new WeakMap,se=new WeakMap,qe=new WeakMap;window.MapboxSearchListbox=$;window.customElements.get("mapbox-search-listbox")||customElements.define("mapbox-search-listbox",$);function ei(s){let e=s.currentTarget;(s.key===" "||s.key==="Enter")&&(s.preventDefault(),s.stopPropagation(),e.dispatchEvent(new MouseEvent("click",{bubbles:!0,composed:!0})))}var po=require("@mapbox/search-js-core");var is=new Set(["street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code"]),os=new Set(["off","on","true","false"]);function Ii(s){let e=s.parentNode;for(;e;){if(e instanceof HTMLFormElement)return e;e=e.parentNode}return null}function Ve(s){let e=s||document;return Array.from(e.querySelectorAll('input[autocomplete~="address-line1"], input[autocomplete~="street-address"]'))}var ss="section-",ns="section-default",rs="section-shipping",as="section-billing";function We(s){let e=Array.from(s.querySelectorAll("[autocomplete]")).filter(o=>{let n=o.tagName.toLowerCase();return n==="input"||n==="select"||n==="textarea"}),i=[];for(let o of e){if(!Gi(o))continue;let n=o.getAttribute("autocomplete")||"";if(!n||os.has(n))continue;let r=n.toLowerCase().split(" ");if(r.length>3)continue;let l=r[r.length-1];if(!is.has(l))continue;r.pop();let c=ns;if(r.length){let p=r[r.length-1];p==="shipping"&&(c=rs,r.pop()),p==="billing"&&(c=as,r.pop())}if(r.length){let p=r[r.length-1];p.startsWith(ss)&&(c=p)}i.push({input:o,section:c,field:l})}return i}function ti(s,e){let i=[],o=[],n=We(s),r=null;for(let{input:l,section:c,field:p}of n){let u=i.length-1,b=!1;if(i.length?(o[u]!==c||i[u][p])&&(b=!0):b=!0,b){if(r)break;i.push({[p]:l}),o.push(c),u++}else i[u][p]=l;l===e&&(r=i[u])}return r!=null?r:{}}function Hi(s,e,i){var l;let o=ti(s,e),n=[i.address_line1,i.address_line2,i.address_line3].filter(c=>Boolean(c)).join(", ");D(o["street-address"],n),D(o["address-line1"],i.address_line1||""),D(o["address-level1"],i.address_level1||""),D(o["address-level2"],i.address_level2||""),D(o["address-level3"],i.address_level3||"");let r=((l=i.metadata)==null?void 0:l.iso_3166_1)||"";if(o.country&&o.country instanceof HTMLSelectElement){let c=o.country.querySelector("option").value,p=c===c.toUpperCase();D(o.country,p?r.toUpperCase():r)}else D(o.country,r);D(o["country-name"],i.country||""),D(o["postal-code"],i.postcode||"")}function ii(s,e){let i=ti(s,e),o={};for(let[n,r]of Object.entries(i))(r==null?void 0:r.value)&&(o[n]=r.value);return o}function Te(s){let e=[];return s["street-address"]?e.push(s["street-address"]):(e.push(s["address-line1"]||""),e.push(s["address-line2"]||""),e.push(s["address-line3"]||"")),e.push(s["address-level3"]||""),e.push(s["address-level2"]||""),e.push(s["address-level1"]||""),e.push(s["postal-code"]||""),s["country-name"]?e.push(s["country-name"]):e.push(s.country||""),e.filter(i=>Boolean(i)).join(", ")}function oi(s,e){let i=Ii(e);if(!i)return;let o=(0,po.featureToSuggestion)(s);Hi(i,e,o)}function uo(s){var o;let e={},i=[s.properties.address_line1,s.properties.address_line2,s.properties.address_line3].filter(n=>Boolean(n)).join(", ");return e["street-address"]=i,e["address-line1"]=s.properties.address_line1,e["address-line2"]=s.properties.address_line2,e["address-line3"]=s.properties.address_line3,e["address-level1"]=s.properties.address_level1,e["address-level2"]=s.properties.address_level2,e["address-level3"]=s.properties.address_level3,e.country=(o=s.properties.metadata)==null?void 0:o.iso_3166_1,e["country-name"]=s.properties.country,e["postal-code"]=s.properties.postcode,e}function mo(s,e){for(let[i,o]of Object.entries(s))if(e[i]!==o)return!0;return!1}var vo=require("@mapbox/search-js-core");var si=require("@mapbox/search-js-core"),Oi=zi(require("no-scroll")),go=require("focus-trap");var ho=require("@mapbox/search-js-core"),fo=class{constructor(){this.feedbackEnabled=!0;this.autofillSessionToken=new ho.SessionToken;this.autofillSessionEnabled=!1;this.detectBrowserAutofillEnabled=!1}},M=new fo;Object.defineProperty(M,"autofillSessionToken",{configurable:!1,writable:!1});var ls=x(`
<template>
  <div class="MapboxAddressConfirmation" aria-hidden="true">
    <mapbox-address-confirmation-feature class="ContentFeature"></mapbox-address-confirmation-feature>
    <mapbox-address-confirmation-no-feature class="ContentNoFeature"></mapbox-address-confirmation-no-feature>
  </div>
</template>
`),Ge,w,ne,Ke,re=class extends C{constructor(){super(...arguments);a(this,Ge,!1);a(this,w,void 0);a(this,ne,void 0);a(this,Ke,{})}get template(){return ls}get templateStyle(){return O}get templateUserStyle(){return y(".MapboxAddressConfirmation",this.theme)}get theme(){return t(this,Ke)}set theme(e){if(d(this,Ke,e),!t(this,w)||!e)return;this.updateTemplateUserStyle(y(".MapboxAddressConfirmation",e));let{ContentFeature:i,ContentNoFeature:o}=t(this,w);i.theme=e,o.theme=e}connectedCallback(){super.connectedCallback(),d(this,w,_(this,{MapboxAddressConfirmation:".MapboxAddressConfirmation",ContentFeature:".ContentFeature",ContentNoFeature:".ContentNoFeature"}));let{MapboxAddressConfirmation:e}=t(this,w);e.setAttribute("aria-hidden","true");let i=this.theme;if(i){let{ContentFeature:o,ContentNoFeature:n}=t(this,w);o.theme=i,n.theme=i}}disconnectedCallback(){d(this,ne,null)}hide(){var i;if(d(this,Ge,!1),!t(this,w))return;let{MapboxAddressConfirmation:e}=t(this,w);e.setAttribute("aria-hidden","true"),(i=t(this,ne))==null||i.deactivate(),Oi.default.off()}show(e,i,o){return L(this,null,function*(){var E;if(!t(this,w))return{type:"cancel"};let{MapboxAddressConfirmation:n,ContentFeature:r,ContentNoFeature:l}=t(this,w),{accessToken:c,minimap:p=!1,theme:u,footer:b}=i;this.theme=u,o?(r.removeAttribute("aria-hidden"),l.setAttribute("aria-hidden","true"),r.minimap=p,r.accessToken=c,r.footer=b,r.update(o,e)):(r.setAttribute("aria-hidden","true"),l.removeAttribute("aria-hidden"),l.update(e)),d(this,Ge,!0),n.removeAttribute("aria-hidden"),Oi.default.on();let F=o?r:l;return d(this,ne,(0,go.createFocusTrap)(n,{fallbackFocus:F,escapeDeactivates:()=>(this.hide(),!0)})),(E=t(this,ne))==null||E.activate(),new Promise(I=>{let fe=F,Di=Ho=>{fe.removeEventListener("result",Di);let ji=Ho.detail;this.hide(),I(ji==="change"?{type:"change",feature:o}:{type:ji})};fe.addEventListener("result",Di)})})}tryShow(e,i){return L(this,null,function*(){if(!t(this,w))return{type:"cancel"};let{accessToken:o,options:n={}}=i,r=new si.MapboxValidate(m({accessToken:o},n)),l=Te(e),p=(yield r.validate(l,{sessionToken:M.autofillSessionToken})).features[0];if(p){let u=F=>F.properties.match_code.confidence===si.MatchCodeConfidence.exact,{skipConfirmModal:b=u}=i;if(b(p))return{type:"nochange"}}return yield this.show(e,i,p)})}};Ge=new WeakMap,w=new WeakMap,ne=new WeakMap,Ke=new WeakMap;window.MapboxAddressConfirmation=re;window.customElements.get("mapbox-address-confirmation")||customElements.define("mapbox-address-confirmation",re);var Ri=new re;function ni(i){return L(this,arguments,function*(s,e={}){let{sections:o=[]}=e;Ri.parentNode||document.body.appendChild(Ri);let n={type:"nochange"},r=Ve(s),l=We(s),c=Array.from(document.querySelectorAll("mapbox-search-listbox"));for(let p of r){if(o.length){let I=l.find(fe=>fe.input===p);if(!I||!o.includes(I.section))continue}let u=ii(s,p),b=c.find(I=>I.input===p);if(b){let I=b.retrieveFeature;if(I){let fe=uo(I);if(!mo(u,fe))continue}}let F=e.accessToken||M.accessToken,E=yield Ri.tryShow(u,z(m({},e),{accessToken:F}));if(E.type==="change")if(b)b.simulateRetrieve(E.feature);else{p.dataset.mapboxSuccess="true";let I=(0,vo.featureToSuggestion)(E.feature);Hi(s,p,I)}E.type==="change"&&n.type!=="cancel"&&(n=E),E.type==="cancel"&&(n=E)}return n})}function ri(s,e){if(e){let i=x(`
        <span>
          <span></span>
          <br />
          <span></span>
        </span>
      `),[o,n]=Array.from(i.querySelectorAll("span > span")),r=e.split(",");if(o.textContent=r[0].trim(),n.textContent=r.slice(1).join(",").trim(),s["address-line2"]){let l=document.createElement("span");l.textContent=s["address-line2"],i.insertBefore(l,n),i.insertBefore(document.createElement("br"),n)}if(s["address-line3"]){let l=document.createElement("span");l.textContent=s["address-line3"],i.insertBefore(l,n),i.insertBefore(document.createElement("br"),n)}return i}else{let i=s["street-address"]||s["address-line1"]||"",o=s["address-line2"],n=s["address-line3"],r=[s["address-level4"]||"",s["address-level3"]||"",s["address-level2"]||"",`${s["address-level1"]||""} ${s["postal-code"]||""}`,s.country||s["country-name"]||""].filter(Boolean).join(", "),c=[i,o,n,r].filter(Boolean).map(u=>`<span>${u}</span>`).join("<br />");return x(`
        <span>${c}</span>
      `)}}function ai(s,e,i,o){return L(this,null,function*(){if(!i)return;let n=Ii(s),r=Object.values(ti(n,s));if(!e.detail.elements.some(E=>r.includes(E)))return;let l=We(n),p=l.find(E=>E.input===s).section,u=Array.from(new Set(l.filter(E=>e.detail.elements.includes(E.input)).map(E=>E.section)));if(!u.includes(p))return;let b=typeof i=="object"&&i.sections||[];if(b.length&&!b.some(E=>u.includes(E)))return;let F=typeof i=="object"?i:{};F=z(m({},F),{accessToken:o,sections:[p]}),yield ni(n,F)})}var ds="https://contribute-api.mapbox.com/v1",cs="https://contribute-api-staging.tilestream.net/v1",ps="edit-suggestion";function li(s,e){if(!M.feedbackEnabled)return;let i=window.location.hostname,n=`${oo(i)||so(i)?cs:ds}/${ps}/address?access_token=${s}`,{originalCoordinate:r,originalAddress:l,changes:c}=e,p={action:"update",reason:"incorrect_address",location:{longitude:r[0],latitude:r[1]},userEmail:"no-reply-autofill@mapbox.com",changes:c,placeName:l};fetch(n,{method:"POST",headers:new Headers({"User-Agent":`mapbox-search-js.${_e}.${navigator.userAgent}`,"Content-Type":"application/json"}),body:JSON.stringify(p)})}var us=x(`
<template>
  <div class="MapboxAddressConfirmationFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Did you mean?</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>

      <div class="ModalAddress ModalAddressApprove"></div>
            
      <div class="ModalMap">
        <mapbox-address-minimap class="Minimap"></mapbox-address-minimap>
      </div>

      <div
        class="Button ButtonPrimary ButtonApprove"
        tabindex="0"
        role="button"
        aria-label="Yes"
      >
        Yes
      </div>
      
      <div
        class="Button ButtonSecondary ButtonReject"
        tabindex="0"
        role="button"
        aria-label="No, use the address I provided"
      >
        No, use the address I provided
      </div>

      <div class="ModalFooter">
          Your confirmation helps improve address data accuracy.
      </div>
    </div>
  </div>
</template>
`),N,Ze,ye,Qe,Je,et,tt,it,Bi=class extends C{constructor(){super(...arguments);a(this,N,void 0);a(this,Ze,{});this.minimap=!1;a(this,ye,void 0);a(this,Qe,void 0);this.update=(e,i)=>{d(this,ye,e),d(this,Qe,i);let{ModalMap:o,Minimap:n,ModalAddressApprove:r}=t(this,N);if(this.minimap){if(o.removeAttribute("aria-hidden"),n.accessToken=this.accessToken,typeof this.minimap=="object"){let{defaultMapStyle:c,theme:p,mapStyleMode:u,satelliteToggle:b}=this.minimap;c&&(n.defaultMapStyle=this.minimap.defaultMapStyle),p&&(n.theme=this.minimap.theme),u&&(n.mapStyleMode=u),b!==void 0&&(n.satelliteToggle=b)}n.feature=e}else o.setAttribute("aria-hidden","true");let l=e.properties.place_name||e.properties.full_address||e.properties.address;r.innerHTML="",r.appendChild(ri(i,l))};a(this,Je,()=>{this.dispatchEvent(new h("result","cancel"))});this.approve=()=>{this.dispatchEvent(new h("result","change"))};this.reject=()=>{this.dispatchEvent(new h("result","nochange")),li(this.accessToken,{originalCoordinate:t(this,ye).geometry.coordinates,originalAddress:t(this,ye).properties.full_address,changes:{address:Te(t(this,Qe))}})};a(this,et,k());a(this,tt,k());a(this,it,k())}get template(){return us}get templateStyle(){return O}get templateUserStyle(){return y(".MapboxAddressConfirmationFeature",this.theme)}get theme(){return t(this,Ze)}set theme(e){if(d(this,Ze,e),!t(this,N)||!e)return;this.updateTemplateUserStyle(y(".MapboxAddressConfirmationFeature",e));let{IconQuestion:i,IconClose:o}=t(this,N);i.innerHTML=H("question",e),o.innerHTML=H("close",e)}set footer(e){if(e===void 0)return;let i=this.querySelector(".ModalFooter");typeof e=="string"?(i.textContent=e,i.removeAttribute("aria-hidden")):e?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),d(this,N,_(this,{MapboxAddressConfirmationFeature:".MapboxAddressConfirmationFeature",Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",ModalMap:".ModalMap",Minimap:".Minimap",IconQuestion:".IconQuestion",IconClose:".IconClose",ButtonApprove:".ButtonApprove",ButtonReject:".ButtonReject",ModalAddressApprove:".ModalAddressApprove"}));let{Modal:e,ModalHeaderTitle:i,IconClose:o,ButtonApprove:n,ButtonReject:r,ModalAddressApprove:l}=t(this,N);e.setAttribute("aria-labelledby",t(this,tt)),e.setAttribute("aria-describedby",t(this,it)),o.setAttribute("aria-controls",t(this,et)),e.id=t(this,et),i.id=t(this,tt),l.id=t(this,it);let c=Array.from(this.querySelectorAll('[role="button"]'));for(let u of c)u.addEventListener("keydown",ei);o.addEventListener("click",t(this,Je)),n.addEventListener("click",this.approve),r.addEventListener("click",this.reject);let p=this.theme;if(p){let{IconQuestion:u,IconClose:b}=t(this,N);u.innerHTML=H("question",p),b.innerHTML=H("close",p)}}disconnectedCallback(){let{IconClose:e,ButtonApprove:i}=t(this,N);e.removeEventListener("click",t(this,Je)),i.removeEventListener("click",this.approve)}};N=new WeakMap,Ze=new WeakMap,ye=new WeakMap,Qe=new WeakMap,Je=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap;window.MapboxAddressConfirmationFeature=Bi;window.customElements.get("mapbox-address-confirmation-feature")||customElements.define("mapbox-address-confirmation-feature",Bi);var ms=x(`
<template>
  <div class="MapboxAddressConfirmationNoFeature">
    <div class="Modal" aria-modal="true" role="dialog">
      <div class="ModalHeader">
        <svg viewBox="0 0 18 18" class="Icon IconQuestion"></svg>
        <div class="ModalHeaderTitle">Confirm address</div>
        <svg
          viewBox="0 0 18 18"
          class="Icon IconClose"
          tabindex="0"
          role="button"
          title="Close"
          aria-label="Close"
          aria-expanded="true"
        ></svg>
      </div>
      <div class="ModalDescription">
        We couldn't verify this address. Please check that your information is correct before continuing.
      </div>
      <br />
      <div class="ModalSubheader">
        You entered
      </div>
      <div class="ModalAddress"></div>
      <div
        class="Button ButtonPrimary"
        tabindex="0"
        role="button"
        aria-label="Use the address I provided"
      >
        Use the address I provided
      </div>
    </div>
  </div>
</template>
`),U,ot,st,nt,rt,at,Pi=class extends C{constructor(){super(...arguments);a(this,U,void 0);a(this,ot,{});this.update=e=>{let{ModalAddress:i}=t(this,U);i.innerHTML="",i.appendChild(ri(e))};a(this,st,()=>{this.dispatchEvent(new h("result","cancel"))});this.reject=()=>{this.dispatchEvent(new h("result","nochange"))};a(this,nt,k());a(this,rt,k());a(this,at,k())}get template(){return ms}get templateStyle(){return O}get templateUserStyle(){return y(".MapboxAddressConfirmationNoFeature",this.theme)}get theme(){return t(this,ot)}set theme(e){if(d(this,ot,e),!t(this,U)||!e)return;this.updateTemplateUserStyle(y(".MapboxAddressConfirmationNoFeature",e));let{IconQuestion:i,IconClose:o}=t(this,U);i.innerHTML=H("question",e),o.innerHTML=H("close",e)}connectedCallback(){super.connectedCallback(),d(this,U,_(this,{Modal:".Modal",ModalHeaderTitle:".ModalHeaderTitle",IconQuestion:".IconQuestion",IconClose:".IconClose",ModalAddress:".ModalAddress",ButtonReject:".Button"}));let{Modal:e,ModalHeaderTitle:i,IconClose:o,ModalAddress:n,ButtonReject:r}=t(this,U);e.setAttribute("aria-labelledby",t(this,rt)),e.setAttribute("aria-describedby",t(this,at)),o.setAttribute("aria-controls",t(this,nt)),e.id=t(this,nt),i.id=t(this,rt),n.id=t(this,at);let l=Array.from(this.querySelectorAll('[role="button"]'));for(let p of l)p.addEventListener("keydown",ei);o.addEventListener("click",t(this,st)),r.addEventListener("click",this.reject);let c=this.theme;if(c){let{IconQuestion:p,IconClose:u}=t(this,U);p.innerHTML=H("question",c),u.innerHTML=H("close",c)}}disconnectedCallback(){let{IconClose:e,ButtonReject:i}=t(this,U);e.removeEventListener("click",t(this,st)),i.removeEventListener("click",this.reject)}};U=new WeakMap,ot=new WeakMap,st=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap;window.MapboxAddressConfirmationNoFeature=Pi;window.customElements.get("mapbox-address-confirmation-no-feature")||customElements.define("mapbox-address-confirmation-no-feature",Pi);var ui=require("@mapbox/search-js-core");var Mo=require("@mapbox/search-js-core");var bo='input:-webkit-autofill,select:-webkit-autofill,textarea:-webkit-autofill{animation-name:onbrowserautofillstart}input:not(:-webkit-autofill),select:not(:-webkit-autofill),textarea:not(:-webkit-autofill){animation-name:onbrowserautofillcancel}@keyframes onbrowserautofillstart{0%{animation-name:"onbrowserautofillstart"}to{animation-name:"onbrowserautofillstart"}}@keyframes onbrowserautofillcancel{0%{animation-name:"onbrowserautofillcancel"}to{animation-name:"onbrowserautofillcancel"}}';var di="browser-autofilled",Fi=[];function fs(){window.dispatchEvent(new window.CustomEvent("browserautofill",{bubbles:!0,cancelable:!0,detail:{elements:Fi}})),Fi=[]}var gs=(0,Mo.debounce)(fs,5);function Eo(s){s.hasAttribute(di)||(s.setAttribute(di,""),Fi.push(s),gs())}function xo(s){!s.hasAttribute(di)||s.removeAttribute(di)}function vs(s){s.animationName==="onbrowserautofillstart"?Eo(s.target):xo(s.target)}function bs(s){let e=s.target;e.nodeName.toLowerCase()!=="select"&&!s.simulated&&(s.inputType==="insertReplacementText"||!("data"in s))?Eo(e):xo(e)}function ci(){M.detectBrowserAutofillEnabled||(M.detectBrowserAutofillEnabled=!0,Ki(bo),document.addEventListener("animationstart",vs,!0),document.addEventListener("input",bs,!0))}var ae,pi,W,v,lt,dt,ct,pt,ut,mt,Ae=class extends C{constructor(){super(...arguments);a(this,ae,new ui.MapboxAutofill);a(this,pi,new ui.SearchSession(t(this,ae)));a(this,W,void 0);a(this,v,new $);this.confirmOnBrowserAutofill=!1;a(this,lt,e=>{this.dispatchEvent(new h(e.type,e.detail))});a(this,dt,e=>{this.dispatchEvent(new h(e.type,e.detail))});a(this,ct,e=>{if(this.dispatchEvent(new h(e.type,e.detail)),!t(this,W))return;let i=e.detail;!i||!i.features||!i.features.length||oi(i.features[0],t(this,W))});a(this,pt,()=>{var e;try{let i=(e=this.querySelector("input"))!=null?e:null;d(this,W,i),t(this,v).input=i}catch(i){d(this,W,null),t(this,v).input=null,console.error(i.message||i)}});a(this,ut,new MutationObserver(t(this,pt)));a(this,mt,e=>{t(this,v).blur(),ai(t(this,W),e,this.confirmOnBrowserAutofill,this.accessToken)})}get accessToken(){return t(this,ae).accessToken}set accessToken(e){t(this,ae).accessToken=e}get options(){return t(this,v).options}set options(e){t(this,v).options=e}get theme(){return t(this,v).theme}set theme(e){t(this,v).theme=e}get popoverOptions(){return t(this,v).popoverOptions}set popoverOptions(e){t(this,v).popoverOptions=e}connectedCallback(){super.connectedCallback(),M.autofillSessionEnabled=!0,t(this,v).session=t(this,pi),t(this,v).session.sessionToken=M.autofillSessionToken,t(this,v).addEventListener("suggest",t(this,lt)),t(this,v).addEventListener("suggesterror",t(this,dt)),t(this,v).addEventListener("retrieve",t(this,ct)),document.body.appendChild(t(this,v)),t(this,ut).observe(this,{subtree:!0,childList:!0}),t(this,pt).call(this),ci(),window.addEventListener("browserautofill",t(this,mt))}disconnectedCallback(){t(this,v).remove(),t(this,v).removeEventListener("suggest",t(this,lt)),t(this,v).removeEventListener("suggesterror",t(this,dt)),t(this,v).removeEventListener("retrieve",t(this,ct)),t(this,ut).disconnect(),window.removeEventListener("browserautofill",t(this,mt))}attributeChangedCallback(e,i,o){if(e==="access-token"){t(this,ae).accessToken=o;return}if(e==="theme"){this.theme=ge(o);return}if(e==="popover-options"){this.popoverOptions=ge(o);return}let n=e.split("-").join("_");o||delete t(this,v).options[n],t(this,v).options[n]=o}focus(){t(this,v).focus()}};ae=new WeakMap,pi=new WeakMap,W=new WeakMap,v=new WeakMap,lt=new WeakMap,dt=new WeakMap,ct=new WeakMap,pt=new WeakMap,ut=new WeakMap,mt=new WeakMap,Ae.observedAttributes=["access-token","theme","popover-options","css-text","language","country","bbox","limit","proximity"];window.MapboxAddressAutofill=Ae;window.customElements.get("mapbox-address-autofill")||customElements.define("mapbox-address-autofill",Ae);var Z=require("@mapbox/search-js-core");var Ms=9,Es=x(`
<template>
  <input class="Input" type="text" />
</template>
`),le,mi,G,K,f,ht,ft,gt,hi,vt,Se=class extends C{constructor(){super(...arguments);a(this,le,new Z.MapboxSearch({}));a(this,mi,new Z.SearchSession(t(this,le)));a(this,G,null);a(this,K,void 0);a(this,f,new $);a(this,ht,e=>{this.dispatchEvent(new h(e.type,e.detail))});a(this,ft,e=>{this.dispatchEvent(new h(e.type,e.detail))});a(this,gt,e=>L(this,null,function*(){var p;this.dispatchEvent(new h(e.type,e.detail));let i=e.detail;if(!i||!i.features.length)return;let o=(0,Z.featureToSuggestion)(i.features[0]);t(this,K).value=o.feature_name;let n=t(this,G);if(!n)return;let r=i.features[0];if(!r)return;let l=(p=r.properties.place_type)==null?void 0:p[0],c=r.bbox;if(c)n.flyTo(Zi(n,Z.LngLatBounds.convert(c).toFlatArray()));else{let u=r.geometry.coordinates,b=Qi(l);n.flyTo({center:u,zoom:b,speed:Li})}}));a(this,hi,e=>{let i=new h("input");Object.assign(i,m({},e)),this.dispatchEvent(i)});a(this,vt,()=>{let e=t(this,G),i=m({},t(this,f).options);if(e.getZoom()<=Ms){delete i.proximity,t(this,f).options=i;return}let o=e.getCenter();t(this,f).options=z(m({},i),{proximity:o})})}get accessToken(){return t(this,le).accessToken}set accessToken(e){t(this,le).accessToken=e}get value(){return t(this,K).value}set value(e){t(this,K).value=e}get template(){return Es}get templateStyle(){return O}get templateUserStyle(){return y(".Input",t(this,f).theme)}get options(){return t(this,f).options}set options(e){t(this,f).options=e}get theme(){return t(this,f).theme}set theme(e){t(this,f).theme=e,!!t(this,K)&&(this.updateTemplateUserStyle(y(".Input",e)),t(this,f).updatePopover())}get popoverOptions(){return t(this,f).popoverOptions}set popoverOptions(e){t(this,f).popoverOptions=e}connectedCallback(){super.connectedCallback();let e=this.querySelector(".Input");e.addEventListener("input",t(this,hi)),d(this,K,e),t(this,f).session=t(this,mi),t(this,f).input=e,t(this,f).addEventListener("suggest",t(this,ht)),t(this,f).addEventListener("suggesterror",t(this,ft)),t(this,f).addEventListener("retrieve",t(this,gt)),document.body.appendChild(t(this,f))}disconnectedCallback(){t(this,f).remove(),t(this,f).input=null,t(this,f).removeEventListener("suggest",t(this,ht)),t(this,f).removeEventListener("suggesterror",t(this,ft)),t(this,f).removeEventListener("retrieve",t(this,gt))}attributeChangedCallback(e,i,o){if(e==="access-token"){t(this,le).accessToken=o;return}if(e==="theme"){this.theme=ge(o);return}if(e==="popover-options"){this.popoverOptions=ge(o);return}let n=e.split("-").join("_");o||delete t(this,f).options[n],t(this,f).options[n]=o}focus(){t(this,f).focus()}bindMap(e){t(this,G)&&t(this,G).off("moveend",t(this,vt)),e&&e.on("moveend",t(this,vt)),d(this,G,e)}unbindMap(){this.bindMap(null)}onAdd(e){this.bindMap(e),this.remove();let i=document.createElement("div");return i.className="mapboxgl-ctrl",i.style.width="300px",i.appendChild(this),i}onRemove(){this.remove(),this.unbindMap()}getDefaultPosition(){return"top-right"}};le=new WeakMap,mi=new WeakMap,G=new WeakMap,K=new WeakMap,f=new WeakMap,ht=new WeakMap,ft=new WeakMap,gt=new WeakMap,hi=new WeakMap,vt=new WeakMap,Se.observedAttributes=["access-token","theme","popover-options","language","country","bbox","limit","navigation-profile","origin","proximity","eta-type","types"];window.MapboxSearchBox=Se;window.customElements.get("mapbox-search-box")||customElements.define("mapbox-search-box",Se);var Co=require("@mapbox/search-js-core");var Ao=zi(require("@mapbox/sphericalmercator"));var To=new Ao.default({size:512,antimeridian:!0}),pe=1280;function yo(s,e){let{width:i,height:o}=Gt(s,!0);switch(e){case"center":return[0,0];case"top":return[0,o/2];case"bottom":return[0,-1*o/2];case"left":return[i/2,0];case"right":return[-1*i/2,0];case"top-left":return[i/2,o/2];case"top-right":return[-1*i/2,o/2];case"bottom-left":return[i/2,-1*o/2];case"bottom-right":return[-1*i/2,-1*o/2]}}var bt,fi,de,Mt,Et,gi,xt,Tt,vi,yt,At,ce,bi,St,_i=class{constructor(e,i,o,n,r,l){a(this,bt,void 0);a(this,fi,()=>{[this.anchorOffsetX,this.anchorOffsetY]=yo(this.markerElement,this.anchor),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}});a(this,de,{anchorX:0,anchorY:0,globalX:0,globalY:0,correctionX:0,correctionY:0});a(this,Mt,!1);a(this,Et,void 0);a(this,gi,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,ce).call(this,e),window.addEventListener("pointermove",t(this,Tt)),window.addEventListener("pointerup",t(this,xt)))});a(this,xt,()=>{window.removeEventListener("pointermove",t(this,Tt)),window.removeEventListener("pointerup",t(this,xt))});a(this,Tt,e=>{e.preventDefault(),e.stopPropagation();let i=this.curPointerXPos-e.pageX,o=this.curPointerYPos-e.pageY;this.markerDeltaX+=i,this.markerDeltaY-=o,this.markerDeltaX=Math.max(Math.min(this.imgElement.width/2,this.markerDeltaX),this.imgElement.width/2*-1),this.markerDeltaY=Math.max(Math.min(this.imgElement.height/2,this.markerDeltaY),this.imgElement.height/2*-1);let n=this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],r=this.imgCenterPx[1]-this.imgCenterAdjustedPx[1],l=this.markerDeltaX-n,c=this.markerDeltaY+r;this.markerTransform={globalX:l,globalY:c},t(this,ce).call(this,e)});a(this,vi,e=>{!this.isActive||(e.preventDefault(),e.stopPropagation(),t(this,ce).call(this,e),window.addEventListener("pointermove",t(this,At)),window.addEventListener("pointerup",t(this,yt)))});a(this,yt,()=>{window.removeEventListener("pointermove",t(this,At)),window.removeEventListener("pointerup",t(this,yt))});a(this,At,e=>{e.preventDefault();let i=Math.round(this.imgContainerElement.scrollTop+(this.curPointerYPos-e.pageY));i=Math.max(Math.min(this.imgElement.height-this.imgContainerElement.clientHeight,i),0);let o=Math.round(this.imgContainerElement.scrollLeft+(this.curPointerXPos-e.pageX));o=Math.max(Math.min(this.imgElement.width-this.imgContainerElement.clientWidth,o),0),this.imgContainerElement.scrollTop=i,this.imgContainerElement.scrollLeft=o;let n=Math.round(o-(this.imgElement.width-this.imgContainerElement.clientWidth)/2),r=Math.round((this.imgElement.height-this.imgContainerElement.clientHeight)/2-i);if(this.imgCenterAdjustedPx=[this.imgCenterPx[0]+n,this.imgCenterPx[1]-r],!this.keepMarkerCentered){let l=this.markerDeltaX+n,c=this.markerDeltaY+r;this.markerTransform={globalX:l,globalY:c}}t(this,St).call(this,o,i),t(this,ce).call(this,e)});a(this,ce,e=>{this.curPointerXPos=e.pageX,this.curPointerYPos=e.pageY});a(this,bi,()=>{let{anchorX:e,anchorY:i,globalX:o,globalY:n,correctionX:r,correctionY:l}=t(this,de),c=e-o+r,p=i+n+l;this.markerElement.style.transform=`translate(calc(-50% + ${c}px), calc(-50% + ${p}px))`});this.reCenter=()=>{let e=(this.imgElement.height-this.imgContainerElement.clientHeight)/2,i=(this.imgElement.width-this.imgContainerElement.clientWidth)/2;this.imgContainerElement.scrollTop=e,this.imgContainerElement.scrollLeft=i,this.imgCenterAdjustedPx=this.imgCenterPx,this.markerDeltaX=this.markerDeltaY=0,this.markerTransform={globalX:0,globalY:0,correctionX:0,correctionY:0}};this.handleMinimapResize=()=>{if(!this.imgElement.height||!this.imgElement.width)return;let e=this.imgCenterOffset.x,i=this.imgCenterOffset.y,o=this.imgElement.width/2-e-this.imgContainerElement.clientWidth/2,n=this.imgElement.height/2-i-this.imgContainerElement.clientHeight/2;this.imgContainerElement.scrollLeft=o,this.imgContainerElement.scrollTop=n,t(this,St).call(this,o,n)};a(this,St,(e,i)=>{let o=this.imgCenterOffset.x,n=this.imgCenterOffset.y,{correctionX:r,correctionY:l}=this.markerTransform,c={};if(e/2<o*-1){let p=o*-1-e/2;c.correctionX=p*2}else e<0?c.correctionX=e:r!==0&&(c.correctionX=0);if(i/2<n*-1){let p=n*-1-i/2;c.correctionY=p*2}else i<0?c.correctionY=i:l!==0&&(c.correctionY=0);this.markerTransform=c});this.markerElement=o,this.imgContainerElement=e,this.imgElement=i,this.keepMarkerCentered=n,this.zoom=r,this.anchor=l,this.curPointerXPos=0,this.curPointerYPos=0,this.markerDeltaX=0,this.markerDeltaY=0,this.imgContainerElement.addEventListener("pointerdown",t(this,vi)),this.keepMarkerCentered||this.markerElement.addEventListener("pointerdown",t(this,gi)),new ResizeObserver(t(this,fi)).observe(this.markerElement)}get anchor(){return t(this,bt)}set anchor(e){d(this,bt,e),[this.anchorOffsetX,this.anchorOffsetY]=yo(this.markerElement,e),this.markerTransform={anchorX:this.anchorOffsetX,anchorY:this.anchorOffsetY}}get markerTransform(){return t(this,de)}set markerTransform(e){d(this,de,m(m({},t(this,de)),e)),t(this,bi).call(this)}get isActive(){return t(this,Mt)}set isActive(e){this.imgContainerElement.style.touchAction=e?"none":"",d(this,Mt,e)}get coordinate(){let e=this.keepMarkerCentered?this.imgCenterAdjustedPx:[this.imgCenterPx[0]-this.markerDeltaX,this.imgCenterPx[1]+this.markerDeltaY];if(J(e,this.imgCenterPx))return t(this,Et);{let i=To.ll(e,this.zoom);return[Ci(i[0],6),Ci(i[1],6)]}}set coordinate(e){d(this,Et,e),this.imgCenterPx=this.imgCenterAdjustedPx=To.px(e,this.zoom)}get imgCenterOffset(){return{x:this.imgCenterPx[0]-this.imgCenterAdjustedPx[0],y:this.imgCenterPx[1]-this.imgCenterAdjustedPx[1]}}};bt=new WeakMap,fi=new WeakMap,de=new WeakMap,Mt=new WeakMap,Et=new WeakMap,gi=new WeakMap,xt=new WeakMap,Tt=new WeakMap,vi=new WeakMap,yt=new WeakMap,At=new WeakMap,ce=new WeakMap,bi=new WeakMap,St=new WeakMap;var So='<svg width="88" height="23" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-rule="evenodd"><defs><path id="g" d="M11.5 2.25a9.25 9.25 0 1 1 0 18.5 9.25 9.25 0 0 1 0-18.5zM7 15.98c-.05-.33-.83-5.8 2.23-8.87a4.4 4.4 0 0 1 3.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39a4.4 4.4 0 0 1-1.28 3.13C12.72 16.93 7 16 7 16v-.02zm8.3-5.48-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z"/><path id="b" d="M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19A3.77 3.77 0 0 1 50.86 15v3.77c0 .13-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01.01-.01c.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V15a3.7 3.7 0 0 1-2.73 1.19c-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.38-.19a4.24 4.24 0 0 0-4.16 3.29 4.07 4.07 0 0 0 0 1.77 4.23 4.23 0 0 0 4.17 3.3 4.22 4.22 0 0 0 4.26-4.19 4.2 4.2 0 0 0-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18a4 4 0 0 1 3.84 3.28c.13.59.13 1.2 0 1.8a4 4 0 0 1-3.84 3.29A3.77 3.77 0 0 1 60.86 15v.77c0 .12-.1.23-.23.23h-1.4a.23.23 0 0 1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4a.23.23 0 0 1-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55a2.73 2.73 0 0 1 2.44-1.56c1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41a.23.23 0 0 1-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.62 0h-1.61a.27.27 0 0 1-.12-.03c-.1-.06-.13-.19-.06-.28l2.43-3.71-2.4-3.65a.21.21 0 0 1-.02-.12.2.2 0 0 1 .2-.21h1.61c.13 0 .24.06.3.17L82 10.54l1.4-2.37a.34.34 0 0 1 .3-.17h1.6l.12.03c.1.06.13.19.06.28l-2.37 3.65 2.43 3.7.01.13a.2.2 0 0 1-.2.21h-1.61a.33.33 0 0 1-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 0 1-.3.17zm-7.12-1.49A2.47 2.47 0 0 1 70.7 12a2.47 2.47 0 0 1 2.42-2.52 2.47 2.47 0 0 1 2.42 2.51 2.48 2.48 0 0 1-2.42 2.52zm-19.87 0a2.48 2.48 0 0 1-2.42-2.48v-.07a2.47 2.47 0 0 1 2.4-2.49 2.47 2.47 0 0 1 2.41 2.51 2.47 2.47 0 0 1-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51a2.47 2.47 0 0 1 2.4-2.52 2.46 2.46 0 0 1 2.41 2.48l.02.08zm18.12 2.47a2.47 2.47 0 0 1-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51a2.47 2.47 0 0 1-2.42 2.51z"/></defs><mask id="c"><rect width="100%" height="100%" fill="#fff"/><use xlink:href="#g"/><use xlink:href="#b"/></mask><g opacity=".3" stroke="#000" stroke-width="3"><circle mask="url(#c)" cx="11.5" cy="11.5" r="9.25"/><use xlink:href="#b" mask="url(#c)"/></g><g opacity=".9" fill="#fff"><use xlink:href="#g"/><use xlink:href="#b"/></g></svg>';var Lo=16,Ts=x(`
<template>
  <div class="MapboxAddressMinimap" aria-hidden="true">
    <div class="MinimapImageContainer">
      <img class="MinimapImage" draggable="false"></img>
      <div class="MinimapInnerFrame">
        <div class="MinimapMarker"></div>
        <div class="MinimapAttribution">
          <div class="MinimapAttributionLogo">
            <a target="_blank" rel="noopener nofollow" href="https://www.mapbox.com/" aria-label="Mapbox logo">
              ${So}
            </a>
          </div>
          <div class="MinimapAttributionText">
            <a target="_blank" href='https://www.mapbox.com/about/maps/'>\xA9 Mapbox</a><a target="_blank" href='http://www.openstreetmap.org/copyright'>\xA9 OpenStreetMap</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
`),ys=x(`
<template>
  <button type="button" class="MinimapStyleToggle"></button>
</template>
`),As=x(`
<template>
  <div class="MinimapFooter">Adjust the marker on the map if it doesn't precisely match your location. This helps improve address data quality.</div>
</template>
`),Ss=x(`
<template>
  <div class="MinimapEditButtons">
    <div class="Button ButtonPrimary MinimapButtonAdjust">Adjust pin</div>
    <div class="Button ButtonPrimary MinimapButtonSave" aria-hidden="true">Save</div>
    <div class="Button MinimapButtonCancel" aria-hidden="true">Cancel</div>
  </div>
</template>
`),Lt,ue,Le,X,Q,B,P,g,T,Ct,kt,wt,me,It,Ht,Ot,Ce,Rt,Bt,Pt,Ft,Mi,Ei,_t,ke,we,Dt,jt,xi,Nt,Ti,Ie=class extends C{constructor(){super(...arguments);a(this,Lt,!1);this.keepMarkerCentered=!1;this.markerAnchor="bottom";a(this,ue,!1);a(this,Le,!1);a(this,X,void 0);a(this,Q,"");a(this,B,void 0);a(this,P,void 0);a(this,g,void 0);a(this,T,void 0);a(this,Ct,void 0);a(this,kt,{});a(this,wt,!1);a(this,me,"default");a(this,It,["mapbox","streets-v11"]);a(this,Ht,void 0);a(this,Ot,void 0);a(this,Ce,()=>{let{ImageContainer:e,ButtonAdjust:i,ButtonSave:o,ButtonCancel:n}=t(this,g);t(this,ue)?(e.classList.add(`${this.dataset.seed}--draggable`),t(this,T).isActive=!0,i.setAttribute("aria-hidden","true"),o.removeAttribute("aria-hidden"),n.removeAttribute("aria-hidden")):(e.classList.remove(`${this.dataset.seed}--draggable`),t(this,T).isActive=!1,i.removeAttribute("aria-hidden"),o.setAttribute("aria-hidden","true"),n.setAttribute("aria-hidden","true"))});a(this,Rt,()=>{d(this,ue,!0),t(this,Ce).call(this)});a(this,Bt,()=>{if(this.feature.properties.full_address&&!J(this.feature.geometry.coordinates,t(this,T).coordinate)){let[e,i]=t(this,T).coordinate;li(this.accessToken,{originalCoordinate:this.feature.geometry.coordinates,originalAddress:this.feature.properties.full_address,changes:{location:{longitude:e,latitude:i}}})}this.onSaveMarkerLocation&&this.onSaveMarkerLocation(t(this,T).coordinate),d(this,ue,!1),t(this,Ce).call(this)});a(this,Pt,()=>{t(this,T).reCenter(),d(this,ue,!1),t(this,Ce).call(this)});a(this,Ft,()=>{this.mapStyleMode=this.mapStyleMode==="default"?"satellite":"default"});a(this,Mi,()=>{t(this,Le)||t(this,T).reCenter(),d(this,Le,!0),t(this,T)&&t(this,T).handleMinimapResize()});a(this,Ei,()=>{d(this,Le,!1)});a(this,_t,e=>{if(t(this,B)===0||t(this,P)===0)return"";let[i,o]=this.defaultMapStyle,n=Kt(i,o),r=this.mapStyleMode==="default"?n:Ji,l=eo+M.autofillSessionToken.toString(),c=r+Co.LngLat.convert(e).toArray().join(",")+","+Lo+",0/"+Math.min(t(this,B)*2,pe)+"x"+Math.min(t(this,P)*2,pe)+"?access_token="+this.accessToken+"&attribution=false&logo=false";return M.autofillSessionEnabled&&(c+=`&sku=${l}`),c});a(this,ke,()=>{if(t(this,X)){let e=t(this,X).geometry.coordinates;d(this,Q,t(this,_t).call(this,e));let{Image:i}=t(this,g);i.src=t(this,Q)}});a(this,we,e=>`url("${lo(e==="default"?"styleToggleDefault":"styleToggleSatellite",this.theme)}")`);a(this,Dt,()=>{let{MapboxAddressMinimap:e,ImageContainer:i,Image:o}=t(this,g),{width:n,height:r}=Gt(this.container),[l,c]=[t(this,B),t(this,P)];d(this,B,Math.min(n,pe)),d(this,P,Math.min(r,pe)),e.style.setProperty("width",`${t(this,B)}px`),e.style.setProperty("height",`${t(this,P)}px`),i.style.setProperty("height",`${t(this,P)}px`),i.style.setProperty("width",`${t(this,B)}px`);let[p,u]=[o.width,o.height];t(this,B)>l&&t(this,B)>p/2&&p<pe||t(this,P)>c&&t(this,P)>u/2&&u<pe?t(this,ke).call(this):t(this,T)&&t(this,T).handleMinimapResize()});a(this,jt,()=>{if(this.querySelector(".MinimapFooter"))return;let i=this.prepareTemplate(As),o=this.querySelector(".MapboxAddressMinimap");if(!o||(o.appendChild(i),this.querySelector(".MinimapEditButtons")))return;let r=this.prepareTemplate(Ss);this.querySelector(".MinimapInnerFrame").appendChild(r),d(this,g,z(m({},t(this,g)),{EditButtons:this.querySelector(".MinimapEditButtons"),ButtonAdjust:this.querySelector(".MinimapButtonAdjust"),ButtonSave:this.querySelector(".MinimapButtonSave"),ButtonCancel:this.querySelector(".MinimapButtonCancel")}));let{ButtonAdjust:c,ButtonSave:p,ButtonCancel:u}=t(this,g);c.addEventListener("click",t(this,Rt)),p.addEventListener("click",t(this,Bt)),u.addEventListener("click",t(this,Pt))});a(this,xi,()=>{if(!t(this,g))return;let{EditButtons:e,ButtonAdjust:i,ButtonSave:o,ButtonCancel:n}=t(this,g),r=this.querySelector(".MinimapFooter");r==null||r.remove(),e==null||e.remove(),i&&(i.remove(),i.removeEventListener("click",t(this,Rt))),o&&(o.remove(),o.removeEventListener("click",t(this,Bt))),n&&(n.remove(),n.removeEventListener("click",t(this,Pt))),delete t(this,g).EditButtons,delete t(this,g).ButtonAdjust,delete t(this,g).ButtonSave,delete t(this,g).ButtonCancel});a(this,Nt,()=>{if(this.querySelector(".MinimapStyleToggle"))return;let i=this.prepareTemplate(ys),o=this.querySelector(".MinimapInnerFrame");!o||(o.appendChild(i),t(this,g).MapStyleToggle=i,i.addEventListener("click",t(this,Ft)),i.style.backgroundImage=t(this,we).call(this,this.mapStyleMode==="default"?"satellite":"default"),i.setAttribute("title",`Switch to ${this.mapStyleMode==="default"?"Satellite":"Default"}`))});a(this,Ti,()=>{if(!t(this,g))return;let{MapStyleToggle:e}=t(this,g);!e||(e.remove(),e.removeEventListener("click",t(this,Ft)),delete t(this,g).MapStyleToggle)})}get canAdjustMarker(){return t(this,Lt)}set canAdjustMarker(e){d(this,Lt,e),e?t(this,jt).call(this):t(this,xi).call(this)}get accessToken(){return t(this,Ct)||M.accessToken}set accessToken(e){d(this,Ct,e)}get feature(){return t(this,X)}set feature(e){d(this,X,e),e?this.show():this.hide()}get template(){return Ts}get templateStyle(){return O}get templateUserStyle(){return y(".MapboxAddressMinimap",this.theme)}get satelliteToggle(){return t(this,wt)}set satelliteToggle(e){d(this,wt,e),e?t(this,Nt).call(this):t(this,Ti).call(this)}get theme(){return t(this,kt)}set theme(e){if(d(this,kt,e),!t(this,g)||!e)return;this.updateTemplateUserStyle(y(".MapboxAddressMinimap",e));let{Marker:i,MapStyleToggle:o}=t(this,g);i.innerHTML=H("marker",e),o&&(o.style.backgroundImage=t(this,we).call(this,this.mapStyleMode==="default"?"satellite":"default"))}get mapStyleMode(){return t(this,me)}set mapStyleMode(e){let i=t(this,me);if(d(this,me,e),!t(this,g))return;let{MapStyleToggle:o}=t(this,g);!o||(o.style.backgroundImage=t(this,we).call(this,i),o.setAttribute("title",`Switch to ${i==="satellite"?"Satellite":"Default"}`),t(this,ke).call(this))}get defaultMapStyle(){return t(this,It)}set defaultMapStyle(e){d(this,It,e),t(this,ke).call(this)}get footer(){return t(this,Ht)}set footer(e){d(this,Ht,e);let i=this.querySelector(".MinimapFooter");i&&(typeof e=="string"?(i.textContent=e,i.removeAttribute("aria-hidden")):e?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true"))}get container(){return t(this,Ot)}set container(e){e&&(e.style.position="relative",d(this,Ot,e))}show(){if(!t(this,X))return;let e=t(this,X).geometry.coordinates;t(this,T).coordinate=e,d(this,Q,t(this,_t).call(this,e));let{MapboxAddressMinimap:i,Image:o}=t(this,g);o.src=t(this,Q),i.removeAttribute("aria-hidden")}hide(){let{MapboxAddressMinimap:e}=t(this,g);e.setAttribute("aria-hidden","true")}connectedCallback(){super.connectedCallback(),d(this,g,_(this,{MapboxAddressMinimap:".MapboxAddressMinimap",ImageContainer:".MinimapImageContainer",Image:".MinimapImage",Marker:".MinimapMarker",MapStyleToggle:".MinimapStyleToggle",EditButtons:".MinimapEditButtons",ButtonAdjust:".MinimapButtonAdjust",ButtonSave:".MinimapButtonSave",ButtonCancel:".MinimapButtonCancel"})),this.mapStyleMode=t(this,me),this.theme=m({},this.theme),this.canAdjustMarker&&t(this,jt).call(this),this.satelliteToggle&&t(this,Nt).call(this),this.container=this.parentElement,new ResizeObserver(t(this,Dt)).observe(this.container),t(this,Dt).call(this);let{MapboxAddressMinimap:i,ImageContainer:o,Image:n,Marker:r}=t(this,g);d(this,T,new _i(o,n,r,this.keepMarkerCentered,Lo,this.markerAnchor)),t(this,T).reCenter(),n.onload=t(this,Mi),n.onerror=t(this,Ei),n.src=t(this,Q),t(this,X)?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden","true")}attributeChangedCallback(e,i,o){if(e==="access-token")this.accessToken=o;else if(e==="can-adjust-marker")this.canAdjustMarker=o==="true";else if(e==="keep-marker-centered")this.keepMarkerCentered=o==="true";else if(e==="marker-anchor"){let n=o;this.markerAnchor=n,t(this,T)&&(t(this,T).anchor=n)}else e==="satellite-toggle"&&(this.satelliteToggle=o==="true")}};Lt=new WeakMap,ue=new WeakMap,Le=new WeakMap,X=new WeakMap,Q=new WeakMap,B=new WeakMap,P=new WeakMap,g=new WeakMap,T=new WeakMap,Ct=new WeakMap,kt=new WeakMap,wt=new WeakMap,me=new WeakMap,It=new WeakMap,Ht=new WeakMap,Ot=new WeakMap,Ce=new WeakMap,Rt=new WeakMap,Bt=new WeakMap,Pt=new WeakMap,Ft=new WeakMap,Mi=new WeakMap,Ei=new WeakMap,_t=new WeakMap,ke=new WeakMap,we=new WeakMap,Dt=new WeakMap,jt=new WeakMap,xi=new WeakMap,Nt=new WeakMap,Ti=new WeakMap,Ie.observedAttributes=["access-token","can-adjust-marker","keep-marker-centered","marker-anchor","satellite-toggle"];window.MapboxAddressMinimap=Ie;window.customElements.get("mapbox-address-minimap")||customElements.define("mapbox-address-minimap",Ie);var Be=require("@mapbox/search-js-core");var Y,he,Ut,Xt,Yt,ko=class{constructor(e,i,o){a(this,Y,void 0);a(this,he,void 0);this.listbox=new $;a(this,Ut,e=>{let i=new h(e.type,e.detail);Object.defineProperty(i,"target",{value:t(this,Y)}),t(this,he).fire("suggest",i)});a(this,Xt,e=>{let i=new h(e.type,e.detail);Object.defineProperty(i,"target",{value:t(this,Y)}),t(this,he).fire("suggesterror",i)});a(this,Yt,e=>{let i=new h(e.type,e.detail);if(Object.defineProperty(i,"target",{value:t(this,Y)}),t(this,he).fire("retrieve",i),!t(this,Y))return;let o=e.detail;!o||!o.features||!o.features.length||oi(o.features[0],t(this,Y))});d(this,Y,i),d(this,he,e),this.listbox.input=t(this,Y),this.listbox.session=new Be.SearchSession(o),this.listbox.session.sessionToken=M.autofillSessionToken,this.listbox.addEventListener("suggest",t(this,Ut)),this.listbox.addEventListener("suggesterror",t(this,Xt)),this.listbox.addEventListener("retrieve",t(this,Yt)),document.body.appendChild(this.listbox)}remove(){this.listbox.remove(),this.listbox.removeEventListener("suggest",t(this,Ut)),this.listbox.removeEventListener("suggesterror",t(this,Xt)),this.listbox.removeEventListener("retrieve",t(this,Yt))}};Y=new WeakMap,he=new WeakMap,Ut=new WeakMap,Xt=new WeakMap,Yt=new WeakMap;var He,Oe,Re,$t,zt,qt,Vt,Wt,wo=class extends Be.Evented{constructor({accessToken:e,options:i,theme:o,popoverOptions:n,confirmOnBrowserAutofill:r}){super();this.instances=[];a(this,He,void 0);a(this,Oe,new Be.MapboxAutofill);a(this,Re,void 0);a(this,$t,void 0);a(this,zt,void 0);this.confirmOnBrowserAutofill=!1;a(this,qt,()=>{J(Ve(),t(this,He))||this.update()});a(this,Vt,new MutationObserver(t(this,qt)));a(this,Wt,e=>L(this,null,function*(){this.instances.forEach(i=>i.listbox.blur());for(let i of this.instances){let o=i.listbox.input;yield ai(o,e,this.confirmOnBrowserAutofill,this.accessToken)}}));ci(),window.addEventListener("browserautofill",t(this,Wt)),M.autofillSessionEnabled=!0,this.accessToken=e||M.accessToken,i&&(this.options=i),o&&(this.theme=o),n&&(this.popoverOptions=n),r&&(this.confirmOnBrowserAutofill=r),this.update()}get accessToken(){return t(this,Oe).accessToken}set accessToken(e){t(this,Oe).accessToken=e}get options(){return t(this,Re)}set options(e){d(this,Re,m(m({},t(this,Re)),e)),this.instances.forEach(i=>{i.listbox.options=m(m({},i.listbox.options),e)})}get theme(){return t(this,$t)}set theme(e){d(this,$t,e),this.instances.forEach(i=>{i.listbox.theme=e})}get popoverOptions(){return t(this,zt)}set popoverOptions(e){d(this,zt,e),this.instances.forEach(i=>{i.listbox.popoverOptions=e})}update(){this.instances.forEach(e=>{e.remove()}),d(this,He,Ve()),this.instances=[],t(this,He).forEach(e=>{let i=new ko(this,e,t(this,Oe));i.listbox.options=this.options,i.listbox.theme=this.theme,i.listbox.popoverOptions=this.popoverOptions,this.instances.push(i)})}observe(){t(this,Vt).observe(document,{subtree:!0,childList:!0}),t(this,qt).call(this)}unobserve(){t(this,Vt).disconnect()}remove(){this.instances.forEach(e=>{e.remove()}),this.unobserve(),window.removeEventListener("browserautofill",t(this,Wt))}};He=new WeakMap,Oe=new WeakMap,Re=new WeakMap,$t=new WeakMap,zt=new WeakMap,qt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap;function Io(s){return new wo(s)}module.exports=No(Ls);
//# sourceMappingURL=index.js.map
